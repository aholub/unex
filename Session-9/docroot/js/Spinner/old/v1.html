<!DOCTYPE html>
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" ></script>

<style>

#spin-target {
  width: 200px;
  height: 200px;
}

.animate {
  -webkit-animation-duration: 2s;
  -webkit-animation-timing-function: cubic-bezier(.3,.2,.02,.99);;
  -webkit-animation-iteration-count: 1;
  -webkit-animation-name: rotation;

  animation-duration: 2s;
  animation-timing-function: cubic-bezier(.3,.2,.02,.99);;
  animation-iteration-count: 1;
  animation-name: rotation;

  transform-origin: center;
}

@-webkit-keyframes rotation {
	0%   { -webkit-transform: rotate3d(0, 0, 1, 0deg); }
	100% { -webkit-transform: rotate3d(0, 0, 1, 90deg); }
}

@keyframes rotation {
	0%	 { transform: rotate3d(0, 0, 1, 0deg); }
	100% { transform: rotate3d(0, 0, 1, 90deg); }
}
</style>

<script>

function getRule( ruleName ) {
	var rule;
	var ss = document.styleSheets;
	for (var i = 0; i < ss.length; ++i) {
		for (var x = 0; x < ss[i].cssRules.length; ++x) {
			rule = ss[i].cssRules[x];
			if (rule.name == ruleName && 
						(  rule.type == CSSRule.WEBKIT_KEYFRAMES_RULE
						|| rule.type == CSSRule.KEYFRAMES_RULE
						))
			{
				return rule;
			}
		}
	}
	return null;
}

function changeSpinAmount(degrees) {
	var cssRule = getRule("rotation");
	cssRule.deleteRule("100%");
	cssRule.appendRule("100% {transform: rotate3d(0, 0, 1," + degrees + "deg);}" )
}

function getRandomIntBetween(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

$( function(){
	$("#spin-button").click(
		function(){
			$('#spin-target').css("-webkit-animiation-name", "none");
			$('#spin-target').css("animiation-name", "none");
			setTimeout(function(){change("rotation");}, 0);

			var deg = getRandomIntBetween(0, 360);
			$("#output").html( String(deg) );
			changeSpinAmount( deg );

			$('#spin-target').one( 'webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend', 
				function(){
					$('#spin-target').removeClass( 'animate' );
				}
			);

			$('#spin-target').addClass( 'animate' );
		}
	)
})

</script>
</head>

<body>
	<!--
<img class="animate" id="spin-target" 
	  src="http://upload.wikimedia.org/wikipedia/commons/7/7d/European_roulette_wheel.svg"
	  />

	-->
<img class="animate" id="spin-target" 
 src="http://www.johnpaulcaponigro.com/blog/http://www.johnpaulcaponigro.com/blog/wp-content/themes/zinfandel-blue-10/images/hue_clock.jpg"
 />

<button type="button" id="spin-button">Spin</button>
u
<h2 id="output"> ? </h2>
</body>
